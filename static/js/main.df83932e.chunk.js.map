{"version":3,"sources":["api/client.js","features/notifications/notificationsSlice.js","app/Navbar.js","features/posts/postsSlice.js","features/api/apiSlice.js","features/users/usersSlice.js","features/posts/PostAuthor.js","features/posts/TimeAgo.js","features/posts/ReactionButtons.js","components/Spinner.js","features/posts/PostsList.js","features/posts/AddPostForm.js","features/posts/SinglePostPage.js","features/posts/EditPostForm.js","features/users/UserPage.js","features/users/UsersList.js","features/notifications/NotificationsList.js","App.js","api/server.js","app/store.js","index.js"],"names":["client","endpoint","body","customConfig","headers","config","method","JSON","stringify","window","fetch","response","json","data","ok","status","url","Error","statusText","Promise","reject","message","get","post","fetchNotifications","createAsyncThunk","_","getState","allNotifications","selectAllNotifications","latestNotification","latestTimestamp","date","notificationAdapter","createEntityAdapter","sortComparer","a","b","localeCompare","notificationsSlice","createSlice","name","initialState","getInitialState","reducers","allNotificationsRead","state","action","Object","values","entities","forEach","notification","read","extraReducers","builder","addCase","fulfilled","upsertMany","payload","isNew","actions","getSelectors","notifications","selectAll","Navbar","unreadNotificationsBadge","dispatch","useDispatch","numUnreadNotifications","useSelector","filter","length","className","to","onClick","postsAdapter","error","fetchPosts","addNewPost","initialPost","postsSlice","reactionAdded","postId","reaction","existingPost","reactions","postUpdated","id","title","content","pending","addOne","rejected","postAdded","posts","selectAllPosts","selectPostByUser","selectById","selectIds","createSelector","userId","user","apiSlice","createApi","reducerPath","baseQuery","fetchBaseQuery","baseUrl","tagTypes","endpoints","getPosts","query","providesTags","result","map","type","getPost","arg","mutation","invalidatesTags","editPost","useGetPostsQuery","useGetPostQuery","useAddNewPostMutation","useEditPostMutation","usersAdapter","fetchUsers","usersSlice","setAll","users","selectAllUsers","selectUserById","PostAuthor","author","TimeAgo","timestamp","timeAgo","parseISO","timePeriod","formatDistanceToNow","reactionEmoji","thumbsUp","hooray","heart","rocket","eyes","ReactionButtons","reactionButtons","entries","emoji","Spinner","text","size","header","style","height","width","PostExcerpt","substring","PostsList","isLoading","isFetching","isSuccess","isError","refetch","sortedPosts","useMemo","slice","sort","renderPosts","containerClassname","cn","disabled","toString","AddPostForm","useState","setTitle","setContent","setUserId","setRequestStatus","canSave","every","Boolean","onSavePostClicked","unwrap","console","usersOptions","value","htmlFor","onChange","e","target","SinglePostPage","match","params","marginTop","EditPostForm","updatePost","history","useHistory","push","placeholder","UserPage","postTitles","UsersList","renderUsers","NotificationsList","useLayoutEffect","renderNotifications","find","notificationClassname","classnames","new","App","seedDate","exact","path","render","component","configureStore","reducer","postsReducer","usersReducer","middleware","getDefaultMiddleware","concat","ARTIFICIAL_DELAY_MS","rng","seedrandom","randomSeedString","localStorage","getItem","getRandomInt","min","max","Math","ceil","floor","Date","toISOString","setItem","setRandom","faker","seed","getTime","randomFromArray","array","db","factory","primaryKey","nanoid","firstName","String","lastName","username","manyOf","oneOf","comments","comment","Number","createUserData","internet","userName","i","create","j","newPost","lorem","words","recent","paragraphs","serializePost","handlers","rest","req","res","ctx","getAll","delay","findFirst","where","equals","patch","updatedPost","update","generateRandomNotifications","undefined","worker","setupWorker","socketServer","MockSocketServer","sendRandomNotifications","socket","since","obj","send","sendMessage","on","parse","notificationTemplates","numNotifications","pastDate","now","valueOf","setMinutes","getMinutes","Array","template","between","start","onUnhandledRequest","store","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.df83932e.chunk.js","sourcesContent":["// A tiny wrapper around fetch(), borrowed from\n// https://kentcdodds.com/blog/replace-axios-with-a-simple-custom-fetch-wrapper\n\nexport async function client(endpoint, { body, ...customConfig } = {}) {\n  const headers = { 'Content-Type': 'application/json' }\n\n  const config = {\n    method: body ? 'POST' : 'GET',\n    ...customConfig,\n    headers: {\n      ...headers,\n      ...customConfig.headers,\n    },\n  }\n\n  if (body) {\n    config.body = JSON.stringify(body)\n  }\n\n  let data\n  try {\n    const response = await window.fetch(endpoint, config)\n    data = await response.json()\n    if (response.ok) {\n      // Return a result object similar to Axios\n      return {\n        status: response.status,\n        data,\n        headers: response.headers,\n        url: response.url,\n      }\n    }\n    throw new Error(response.statusText)\n  } catch (err) {\n    return Promise.reject(err.message ? err.message : data)\n  }\n}\n\nclient.get = function (endpoint, customConfig = {}) {\n  return client(endpoint, { ...customConfig, method: 'GET' })\n}\n\nclient.post = function (endpoint, body, customConfig = {}) {\n  return client(endpoint, { ...customConfig, body })\n}\n","import { createSlice, createAsyncThunk, createEntityAdapter } from '@reduxjs/toolkit';\nimport { client } from '../../api/client.js';\n\nexport const fetchNotifications = createAsyncThunk(\n  'notifications/fetchNotifications',\n  \n  // ÐœÑ‹ Ð¼Ð¾Ð¶ÐµÐ¼ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŽ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ thunk, ÐºÐ¾Ð³Ð´Ð° Ð¼Ñ‹ ÐµÐ³Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ dispatch(addPost(newPost)).\n  async (_, { getState }) => { \n    \n    // Ð’ createAsyncThunk, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð¸Ð½ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚, Ð¸ Ð²ÑÐµ, Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÐ¼, \n    // ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ Ð¿ÐµÑ€Ð²Ñ‹Ð¼ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð¼ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾Ð¹ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸.\n    \n    // Ð’Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ð½Ð°ÑˆÐµÐ¼Ñƒ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŽ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾Ð¹ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ â€” ÑÑ‚Ð¾ thunkAPI Ð¾Ð±ÑŠÐµÐºÑ‚ \n    // {\n    //   dispatch/getState:  Ð¤Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ dispatchÐ¸ getStat eÐ¼ÐµÑ‚Ð¾Ð´Ñ‹ Ð¸Ð· Ð½Ð°ÑˆÐµÐ³Ð¾ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð° Redux. \n    //                       Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ñ… Ð²Ð½ÑƒÑ‚Ñ€Ð¸ thunk Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ \n    //                       Ð¸Ð»Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð° Redux \n    //                       (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ñ‡Ñ‚ÐµÐ½Ð¸Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð´Ñ€ÑƒÐ³Ð¾Ð³Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ).\n                      \n    //   extra:              Â«Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Â», ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ð² thunk middleware Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°. \n    //                       ÐžÐ±Ñ‹Ñ‡Ð½Ð¾ ÑÑ‚Ð¾ ÐºÐ°ÐºÐ°Ñ-Ñ‚Ð¾ Ð¾Ð±Ð¾Ð»Ð¾Ñ‡ÐºÐ° API, Ñ‚Ð°ÐºÐ°Ñ ÐºÐ°Ðº Ð½Ð°Ð±Ð¾Ñ€ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð·Ð½Ð°ÑŽÑ‚, ÐºÐ°Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ Ð²Ñ‹Ð·Ð¾Ð²Ñ‹ API Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€ \n    //                       Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð²Ð°ÑˆÐ¸Ð¼ thunk'aÐ¼ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð¸Ð¼ÐµÑ‚ÑŒ Ð²ÑÐµ URL-Ð°Ð´Ñ€ÐµÑÐ° Ð¸ Ð»Ð¾Ð³Ð¸ÐºÑƒ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð½ÐµÐ¿Ð¾ÑÑ€ÐµÐ´ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ Ð²Ð½ÑƒÑ‚Ñ€Ð¸\n    \n    //   requestId:          Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ð° Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð° thunk'a. ÐŸÐ¾Ð»ÐµÐ·Ð½Ð¾ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°.\n\n    //   signal:             AbortController.signal Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€ÑƒÑŽ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð»Ñ Ð¾Ñ‚Ð¼ÐµÐ½Ñ‹ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÐ¼Ð¾Ð³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°.\n                      \n    //   rejectWithValue:    Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ rejected Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ, ÐµÑÐ»Ð¸ thunk Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÑƒ.\n    // }\n\n    // Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð¿Ð¸ÑˆÐµÑ‚Ðµ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ð²Ð¼ÐµÑÑ‚Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ createAsyncThunk, Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ \n    // Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ (dispatch, getState)Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹, Ð° Ð½Ðµ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÑÑ‚ÑŒ Ð¸Ñ… Ð² Ð¾Ð´Ð¸Ð½ Ð¾Ð±ÑŠÐµÐºÑ‚.\n    // INFO: https://redux.js.org/tutorials/essentials/part-6-performance-normalization#thunk-arguments\n    //       https://redux-toolkit.js.org/api/createAsyncThunk\n\n    const allNotifications = selectAllNotifications(getState());\n    const [latestNotification] = allNotifications; // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ ÑÐ°Ð¼Ñ‹Ð¹ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ð² Ð¼Ð°ÑÑÐ¸Ð²Ðµ (ÑÐ²ÐµÐ¶ÐµÐµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð² Ð½Ð°Ñ‡Ð°Ð»Ðµ Ð¼Ð°ÑÑÐ¸Ð²Ð°)\n    const latestTimestamp = latestNotification ? latestNotification.date : '';\n    const response = await client.get(`/fakeApi/notifications?since=${latestTimestamp}`)\n    return response.data;\n  }\n)\n\nconst notificationAdapter = createEntityAdapter({\n  sortComparer: (a, b) => b.date.localeCompare(a.date) // Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð¼Ð°ÑÑÐ¸Ð² Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð² Ñ‚Ð°Ðº, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð±ÑŠÐµÐºÑ‚ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ñ ÑÐ°Ð¼Ð¾Ð¹ ÑÐ²ÐµÐ¶ÐµÐ¹ Ð´Ð°Ñ‚Ð¾Ð¹ Ð¾ÐºÐ°Ð·Ð°Ð»ÑÑ Ð¿ÐµÑ€Ð²Ñ‹Ð¼.\n});\n\nexport const notificationsSlice = createSlice({\n  name: 'notifications',\n  initialState: notificationAdapter.getInitialState(),\n  reducers: {\n    allNotificationsRead(state, action) {\n      Object.values(state.entities).forEach((notification) => {\n        notification.read = true;\n      })\n    }\n  },\n  extraReducers(builder) {\n    builder\n      .addCase(fetchNotifications.fulfilled, (state, action) => {\n        notificationAdapter.upsertMany(state, action.payload); // Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¼Ð°ÑÑÐ¸Ð² ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÐµÐ¹ Ð¸Ð»Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚, Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ Ð¿Ð¾Ð²ÐµÑ€Ñ…Ð½Ð¾ÑÑ‚Ð½ÑƒÑŽ ÐºÐ¾Ð¿Ð¸ÑŽ, \n        // Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð¸ Ð½Ð¾Ð²Ñ‹Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ñ‹, Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿Ð¸ÑÐ°Ð² ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ, Ð´Ð¾Ð±Ð°Ð²Ð¸Ð² Ð²ÑÐµ, Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð±Ñ‹Ð»Ð¾, Ð¸ Ð½Ðµ ÐºÐ°ÑÐ°ÑÑÑŒ ÑÐ²Ð¾Ð¹ÑÑ‚Ð², Ð½Ðµ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ñ… Ð² Ð½Ð¾Ð²Ð¾Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ðµ.\n        // state.push(...action.payload); ÐÐ½Ð°Ð»Ð¾Ð³\n        \n        Object.values(state.entities).forEach(notification => {\n          notification.isNew = !notification.read; // Ð›ÑŽÐ±Ñ‹Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¼Ñ‹ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð»Ð¸, Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ð½Ð¾Ð²Ñ‹Ð¼Ð¸\n        })\n      })\n  }\n})\n\nexport const { allNotificationsRead } = notificationsSlice.actions;\n\nexport default notificationsSlice.reducer;\n\nexport const { selectAll: selectAllNotifications } = \n  notificationAdapter.getSelectors((state) => state.notifications)\n// export const selectAllNotifications = (state) => state.notifications;","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { selectAllNotifications } from '../features/notifications/notificationsSlice';\n\nimport { fetchNotifications } from '../features/notifications/notificationsSlice';\n\nexport const Navbar = () => {\n  const dispatch = useDispatch();\n  const notifications = useSelector(selectAllNotifications)\n  const numUnreadNotifications = notifications.filter((notification) => notification.isNew).length\n\n  \n  const fetchNewNotifications = () => {\n    dispatch(fetchNotifications());\n  }\n  \n  let unreadNotificationsBadge\n\n  if (numUnreadNotifications > 0) {\n    unreadNotificationsBadge = <span className=\"badge\">{numUnreadNotifications}</span>\n  }\n  \n  return (\n    <nav>\n      <section>\n        <h1>Redux Essentials Example</h1>\n\n        <div className=\"navContent\">\n          <div className=\"navLinks\">\n            <Link to=\"/\">Posts</Link>\n            <Link to=\"/users\">Users</Link>\n            <Link to=\"/notifications\">Notifications {unreadNotificationsBadge}</Link>\n          </div>\n          <button className=\"button\" onClick={fetchNewNotifications}>\n            Refresh Notifications\n          </button>\n        </div>\n      </section>\n    </nav>\n  )\n}\n","import { createSlice, createAsyncThunk, createSelector, createEntityAdapter } from '@reduxjs/toolkit';\nimport { client } from '../../api/client';\n// import { sub } from 'date-fns';\n\n// const initialState = [\n  // { \n    // id: '1', \n    // title: 'First Post!', \n    // content: 'Hello!', \n    // date: sub(new Date(), { minutes: 10}).toISOString(),\n    // reactions: {thumbsUp: 0, hooray: 0, heart: 0, rocket: 0, eyes: 0}\n  // },\n  // { id: '2', \n    // title: 'Second Post', \n    // content: 'More text', \n    // date: sub(new Date(), { minutes: 5}).toISOString(),\n    // reactions: {thumbsUp: 0, hooray: 0, heart: 0, rocket: 0, eyes: 0}\n  // },\n// ];\n\n\n\nconst postsAdapter = createEntityAdapter({\n  sortComparer: (a, b) => b.date.localeCompare(a.date)\n});\n\n\n// const initialState = {\n//   posts: [],\n//   status: 'idle', // Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒÑÑ ÐºÐ°Ðº Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ 'idle' | 'loading' | 'succeeded' | 'failed'\n//   error: null,\n// };\n\nconst initialState = postsAdapter.getInitialState({\n  status: 'idle',\n  error: null,\n})\n// getInitialState === { ids: [], entities: {}, + status: 'idle', + error: null }\n\n\n \n// Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ð·Ð¾Ð²Ð° createAsyncThunk Ð¾Ð´Ð½Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ fetchPosts, Ð¸Ð¼ÐµÑŽÑ‰Ð°Ñ Ñ‚Ñ€Ð¸ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð° fetchPosts.(pending|fulfilled|rejected)\n// 1)fetchPosts - Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ ÐºÐ¾Ð»Ð±ÐµÐº Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ (Ð¸Ð· Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð°), Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÐµÐ¼ Ð¾Ð½Ð° Ð²Ñ‹Ð·Ð¾Ð²ÐµÑ‚ Ð²Ð½ÑƒÑ‚Ñ€. ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾(Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ) fetchPosts.pending() Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ñ‚Ð¸Ð¿Ð° Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ 'posts/fetchPosts/pending'\n// 2)fetchPosts.pending() 3)fetchPosts.fulfilled()  4)fetchPosts.rejected() - Ñ‚Ñ€Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»Ñ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð´Ð»Ñ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ thunk'a\n// Ð¸ ÐµÐ³Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð² createSlice({ extraReducers(builder): { Ð¢Ð£Ð¢-> builder.addCase() } })\n\n// API: https://redux-toolkit.js.org/api/createAsyncThunk#overview\n// Ð“Ð°Ð¹Ð´: https://redux.js.org/tutorials/essentials/part-5-async-logic#fetching-data-with-createasyncthunk\n// Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ñ„ÑƒÐ½. createAsyncThunk: https://redux-toolkit.js.org/api/createAsyncThunk#return-value\n\nexport const fetchPosts = createAsyncThunk( // // fetchPosts- Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ ajax Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€(Ð¸Ð¼Ð¸Ñ‚Ð°Ñ†Ð¸Ñ) Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÐ¿Ð¸ÑÐºÐ° ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹.\n  'posts/fetchPosts',\n  // 'posts/fetchPosts' - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÐ° Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ñ‚Ñ€ÐµÑ… Ñ‚Ð¸Ð¿Ð¾Ð² Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ 'posts/fetchPosts/(pending|fulfilled|rejected)'.\n  \n  async () => {\n    // ÐºÐ¾Ð»Ð±ÐµÐº Â«ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð¾Ð¹ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸Â», ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒ Promise.\n    // ÐŸÐµÑ€ÐµÐ´ Ð½Ð°Ñ‡Ð°Ð»Ð¾Ð¼ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÑÑ‚Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²ÑÐµÐ³Ð´Ð° Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ fetchPosts.pending(), \n    // Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ñƒ Ð¾ Ð½Ð°Ñ‡Ð°Ð»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ thunk'a, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑÑ€Ð°Ð·Ñƒ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ñ€Ð¾ÑÐ»ÑƒÑˆÐ°Ð½ Ð² extraReducer\n    // Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ: Promise c Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð¸ Ð²Ñ‹Ð·Ð¾Ð² fetchPosts.fulfilled() Ð˜Ð›Ð˜ Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð½Ñ‹Ð¹ Promise Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹ Ð¸ Ð²Ñ‹Ð·Ð¾Ð² fetchPosts.rejected() \n    // Ð½Ðµ Ð·Ð°Ð±ÑƒÐ´ÑŒ Ð¿Ñ€Ð¾ Ð²ÑÐ¿Ð»Ñ‹Ñ‚Ð¸Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð¸Ð· rejected, Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ ÑŽÐ·Ð°Ñ‚ÑŒ  .unwrap() https://redux-toolkit.js.org/api/createAsyncThunk#unwrapping-result-actions\n    const response = await client.get('/fakeApi/posts');\n    return response.data;\n  },\n  // Ð¢Ñ€ÐµÑ‚Ð¸Ð¹ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ options Ð¾Ð±ÑŠÐµÐºÑ‚ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾).\n) // Ð’ÑÑ‘ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð¾ createAsyncThunk API Ð² Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¾Ð¹ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ Ð¾Ð½ Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÑ‚ÑÑ ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾.\n\nexport const addNewPost = createAsyncThunk(\n  'posts/addNewPost',\n  async (initialPost) => { // Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ - Ð¾Ð±ÑŠÐµÐºÑ‚. ÐžÐ½ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ð¹ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· Ñ„Ð¾Ñ€Ð¼Ñ‹ Ð½Ð°Ñ…Ð¾Ð´. Ð² ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ðµ AddPostForm.js\n    const response = await client.post('/fakeApi/posts', initialPost);\n    return response.data;\n  }\n)\n\nconst postsSlice = createSlice({\n  name: 'posts',\n  initialState, // from getInitialAdapter\n  reducers: {\n    // ÐšÐ¾Ð³Ð´Ð° Ð¼Ñ‹ Ð¿Ð¸ÑˆÐµÐ¼ postAdded Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ñ€ÐµÐ´ÑŽÑÐµÑ€Ð°, createSlice Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ Ñ‚ÐµÐ¼-Ð¶Ðµ Ð¸Ð¼ÐµÐ½ÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð¸ Ñƒ Ñ€ÐµÐ´ÑŽÑÐµÑ€Ð°.\n    // postAdded: {\n    //   reducer(state, { payload }) {\n    //     state.posts.push(payload) // ÑÑ‚Ð¾ Ð¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ. ÐžÐ½Ð° Ð¿Ñ€ÐµÐ¾Ð±Ñ€Ð°Ð·ÑƒÑŽÑ‚ÑÑ Ð² Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ðµ Ð½ÐµÐ¸Ð·Ð¼ÐµÐ½ÑÐµÐ¼Ñ‹Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð·Ð° ÑÑ‡ÐµÑ‚ Immer'a\n    //   },\n    //   prepare(title, content, userId) { // Ð¸Ð»Ð¸ 'prepare callback', Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿ÐµÑ€ÐµÐ´ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð¼  reducer, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐºÑˆÐµÐ½Ð°. \n    //     return { // Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ prepare Ð¾Ð±ÑŠÐµÐºÑ‚ action, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ñ€Ð¾ÐºÐ¸Ð´Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð²Ð¾ Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ reducer Ð²Ñ‹ÑˆÐµ. \n    //       payload: {\n    //         id: nanoid(), // Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ñ‹ Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¾ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÑ‚ÑŒ Ð´Ð¾ Ð¿Ð¾Ð¿Ð°Ð´Ð°Ð½Ð¸Ñ Ð² Ñ€ÐµÐ´ÑŒÑŽÑÐµÑ€. Ð ÐµÐ´ÑŽÑÐµÑ€ Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð¾ÑÐ½Ð¾Ð²Ð½ÑƒÑŽ Ð»Ð¾Ð³Ð¸ÐºÑƒ.\n    //         date: new Date().toISOString(), // Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´Ð°Ñ‚Ñ‹ Ð¸ ÐµÑ‘ Ñ‚Ñ€Ð°Ð½ÑÑ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ ISO. (Ð³Ð³.Ð¼Ð¼.Ð´Ð´)\n    //         title,\n    //         content,\n    //         user: userId,\n    //         reactions: {thumbsUp: 0, hooray: 0, heart: 0, rocket: 0, eyes: 0},\n    //       }\n    //     }\n    //   },\n    // },\n    reactionAdded: (state, action) => {\n      const { postId, reaction } = action.payload;\n      // Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½ÑƒÑŽ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð° Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ createEntityAdapter > .getInitialState\n      // Ð¼Ñ‹ ÑƒÑ…Ð¾Ð´Ð¸Ð¼ Ð¾Ñ‚ Ð¿Ð¾Ð¸ÑÐºÐ° (On) Ð¸ Ð¿Ð¾Ð²Ñ‹ÑˆÐ°ÐµÐ¼ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ\n      // const existingPost = state.posts.find(post => post.id === postId);\n      const existingPost = state.entities[postId];\n      if(existingPost) {\n        existingPost.reactions[reaction]++\n      }\n    },\n    postUpdated: (state, action) => {\n      const { id, title, content } = action.payload;\n      // const existingPost = state.posts.find((post) => post.id === id);\n      const existingPost = state.entities[id];\n      if (existingPost) {\n        existingPost.title = title;\n        existingPost.content = content;\n      }\n    }\n  },\n  // ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚/Ð¿Ñ€Ð¾ÑÐ»ÑƒÑˆÐ¸Ð²Ð°ÐµÑ‚ Ñ‚Ñ€Ð¸ Ñ„ÑƒÐ½. (ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ), ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¿Ð¾Ñ€Ð¾Ð¶Ð´Ð°ÐµÑ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ \"createAsyncThunk\"\n  extraReducers(builder) { \n    // Ð“Ð°Ð¹Ð´: https://redux.js.org/tutorials/essentials/part-5-async-logic#reducers-and-loading-actions\n    builder\n    // ÐŸÐµÑ€ÐµÐ´ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸ÐµÐ¼ Ñ„ÑƒÐ½. fetchPosts Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ fetchPosts.pending (ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ), ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ð¾ÑÑ‹Ð»Ð°ÐµÑ‚ Ñ‚Ð¸Ð¿ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ 'posts/fetchPosts/pending'\n    // ÑÑ‚Ð¾Ñ‚ Ñ‚Ð¸Ð¿ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð¾Ñ‚Ð»Ð°Ð²Ð»Ð¸Ð²Ð°Ñ‚ÑÑ Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑÑ Ð² ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚. Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐµ, Ð² Ð½Ð°ÑˆÐµÐ¼ ÑÐ»ÑƒÑ‡Ðµ Ð² .addCase(fetchPosts.pending, ... )\n      .addCase(fetchPosts.pending, (state, action) => { // Ñ‚.Ðµ. Ð¢Ð£Ð¢\n          state.status = 'loading'; \n        })\n      .addCase(fetchPosts.fulfilled, (state, action) => {\n        state.status = 'succeeded';\n        // state.posts = state.posts.concat(action.payload); // ÐÐ½Ð°Ð»Ð¾Ð³ .upsertMany\n        postsAdapter.upsertMany(state, action.payload);\n        // Ñ€ÐµÐ´ÑŒÑŽÑÐµÑ€ upsertMany ÐºÐ°Ðº ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ñƒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‰Ð°Ñ Ð¼ÑƒÑ‚Ð¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ.\n        // ÐžÐ½ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð²ÑÐµ Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð² ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ, Ð¿ÐµÑ€ÐµÐ´Ð°Ð² Ñ‡ÐµÑ€Ð½Ð¾Ð²Ð¸Ðº state Ð¸ Ð¼Ð°ÑÑÐ¸Ð² ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð² action.payload\n        // Ð•ÑÐ»Ð¸ Ð² ÑÑ‚Ð¾Ð¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ ÑƒÐ¶Ðµ ÐµÑÑ‚ÑŒ ÐºÐ°ÐºÐ¸Ðµ-Ð»Ð¸Ð±Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ action.payload, upsertManyÑ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½Ð¸Ñ‚ Ð¸Ñ… Ð²Ð¼ÐµÑÑ‚Ðµ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÑŽÑ‰Ð¸Ñ… Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ð¾Ð².\n      })\n   // .addCase(addNewPost.fulfilled, (state, action) => {\n   //   state.posts.push(action.payload);\n   // })\n      .addCase(addNewPost.fulfilled, postsAdapter.addOne) // addOne Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð¼ÐµÑ‚Ð¾Ð´Ð° Ð´Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² ÑÑ‚ÐµÐ¹Ñ‚\n      .addCase(fetchPosts.rejected, (state, action) => {\n        state.status = 'failed';\n        state.error = action.error.message;\n      })\n   }\n});\n\n\n// createSlice Ð±ÑƒÐ´ÐµÑ‚ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ (Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð° ÐºÑƒÐ»Ð¸ÑÐ°Ð¼Ð¸) Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¾Ð±ÑŠÐµÐºÑ‚Ð° Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ñ€ÐµÐ´ÑŒÑŽÑÐµÑ€Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¼Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð² ÑÐ»Ð°Ð¹Ñ\n// Ð¸Ð¼Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÐµÑ‚ Ñ Ð¸Ð¼ÐµÐ½ÐµÐ¼ Ñ€ÐµÐ´ÑŽÑÐµÑ€Ð°.\nexport const { postAdded, postUpdated, reactionAdded } = postsSlice.actions;\n\nexport default postsSlice.reducer;\n\n// ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ñ‹\n// Ð¡ÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ñ‹ Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¼ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð´Ð»Ñ Ð¸Ð½ÐºÐ°Ð¿ÑÑƒÐ»ÑÑ†Ð¸Ð¸ Ð»Ð¾Ð³Ð¸ÐºÐ¸ Ð¿Ð¾Ð¸ÑÐºÐ° Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ Ð¸Ð· ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ, \n// Ð»Ð¾Ð³Ð¸ÐºÐ¸ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ Ð¸ Ð¿Ð¾Ð²Ñ‹ÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð·Ð° ÑÑ‡ÐµÑ‚ Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð´ÑƒÐ±Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ¾Ð´Ð° Ð² Ð´Ñ€ÑƒÐ³Ð¸Ñ… ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°Ñ….\n// export const selectAllPosts = (state) => state.posts.posts; // state === store.getState() Ð¸Ð· useDispatch()\n// export const selectPostById = (state, postId) => state.posts.posts.find(post => post.id === postId)\nexport const {\n  selectAll: selectAllPosts,\n  selectById: selectPostById,\n  selectIds: selectPostIds\n} = postsAdapter.getSelectors(state => state.posts);\n// {selectIds: Æ’, selectEntities: Æ’, selectAll: Æ’, selectTotal: Æ’, selectById: Æ’} = postsAdapter.getSelectors(state => state.posts)\n// Ð—Ð°Ð¼ÐµÐ½ÑÐµÑ‚ Ð½Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ñ‹Ðµ Ð¾Ñ‚ Ñ€ÑƒÐºÐ¸ selectAllPostsÐ¸ selectPostById ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð½Ð° ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ postsAdapter.getSelectors. \n// ÐŸÐ¾ÑÐºÐ¾Ð»ÑŒÐºÑƒ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ñ‹ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ Ñ ÐºÐ¾Ñ€Ð½ÐµÐ²Ñ‹Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Redux, Ð¸Ð¼ Ð½ÑƒÐ¶Ð½Ð¾ Ð·Ð½Ð°Ñ‚ÑŒ, Ð³Ð´Ðµ Ð½Ð°Ð¹Ñ‚Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð½Ð°ÑˆÐ¸Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð² ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ Redux, \n// Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð¼Ñ‹ Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ state.posts \n// Ð¡Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð¾Ð² Ð²ÑÐµÐ³Ð´Ð° Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ selectAllÐ¸ selectById, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð¼Ñ‹ Ð¼Ð¾Ð¶ÐµÐ¼ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ Ð´ÐµÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ES6, \n// Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¿ÐµÑ€ÐµÐ¸Ð¼ÐµÐ½Ð¾Ð²Ñ‹Ð²Ð°Ñ‚ÑŒ Ð¸Ñ… Ð¿Ñ€Ð¸ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ðµ Ð¸ ÑÐ¾Ð¿Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð¸Ð¼ÐµÐ½Ð° ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð¾Ð².\n\n\n// createSelector Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÐ¼Ñ‹Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð±ÑƒÐ´ÑƒÑ‚ Ð¿ÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ….\n// Ð•ÑÐ»Ð¸ Ð¼Ñ‹ Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ selectPostsByUser Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€Ð°Ð·, Ð¾Ð½ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ñ‚Ð¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ, ÐµÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ð»Ð¸Ð±Ð¾ postsÐ¸Ð»Ð¸ userId Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð¾ÑÑŒ\n// createSelector API: https://redux.js.org/usage/deriving-data-selectors#createselector-overview \n\n// createSelector ÑÑ‚Ð¾ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð² Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸ Reselect, Ð½Ð¾ Ð´Ð»Ñ ÑƒÐ´Ð¾Ð±ÑÑ‚Ð²Ð° ÐµÑ‘ Ð´Ð¾Ð±Ð°Ð²Ð¸Ð»Ð¸ Ð² Ð¿Ð°ÐºÐµÑ‚ Redux-toolkit\n// Reselect: https://github.com/reduxjs/reselect\n\nexport const selectPostByUser = createSelector( \n  // ÐšÐ¾Ð³Ð´Ð° Ð¼Ñ‹ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ selectPostsByUser(state, userId), createSelector Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ð²ÑÐµ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð² ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð¸Ð· Ð½Ð°ÑˆÐ¸Ñ… ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð¾Ð² Ð²Ð²Ð¾Ð´Ð°. \n  [\n    selectAllPosts, // ÐŸÐµÑ€Ð²Ñ‹Ð¹ Ð²Ñ…Ð¾Ð´Ð½Ð¾Ð¹ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ Ð±ÑƒÐ´ÐµÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ (state Ð¸ userId)\n    (state, userId) => userId // Ð’Ñ‚Ð¾Ñ€Ð¾Ð¹ Ð²Ñ…Ð¾Ð´Ð½Ð¾Ð¹ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ Ñ‚Ð°ÐºÐ¸Ðµ Ð¶Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ñ€Ð¸ Ð²Ñ‹Ð·Ð¾Ð²Ðµ (state, userId)\n  ], \n  \n  // Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ Ð²Ñ…Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð±ÑƒÐ´ÐµÑ‚ posts, Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð²Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð±ÑƒÐ´ÐµÑ‚ userId\n  (posts, userId) => posts.filter(post => post.user === userId)  \n)","import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\n\nexport const apiSlice = createApi({\n  // Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð½Ðµ ÑƒÐºÐ°Ð¶ÐµÑ‚Ðµ reducerPath Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€, Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¾Ð½ Ð±ÑƒÐ´ÐµÑ‚ 'api' \n  reducerPath: 'api', // store: state.api\n\n  // Ð’ÑÐµ Ð½Ð°ÑˆÐ¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð±ÑƒÐ´ÑƒÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ URL-Ð°Ð´Ñ€ÐµÑÐ°, Ð½Ð°Ñ‡Ð¸Ð½Ð°ÑŽÑ‰Ð¸ÐµÑÑ Ñ Â«/fakeApiÂ».\n  baseQuery: fetchBaseQuery({ baseUrl: '/fakeApi' }),\n  // fetchBaseQuery - ÐÐµÐ±Ð¾Ð»ÑŒÑˆÐ°Ñ Ð¾Ð±Ð¾Ð»Ð¾Ñ‡ÐºÐ° fetch, Ð¿Ñ€ÐµÐ´Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð½Ð°Ñ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð².\n\n  tagTypes: ['Post'], // Ð·Ð´ÐµÑÑŒ Ð½ÐµÑ‚ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð² Ð»Ð¸Ñ‚ÐµÑ€Ð°Ð»ÑŒÐ½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐµ 'Post'\n  // ÐœÑ‹ Ð¼Ð¾Ð³Ð»Ð¸ Ð±Ñ‹ Ð½Ð°Ð·Ð²Ð°Ñ‚ÑŒ ÑÑ‚Ð¾ 'Fred', 'qwerty' Ð¸Ð»Ð¸ ÐºÐ°Ðº-Ð½Ð¸Ð±ÑƒÐ´ÑŒ ÐµÑ‰Ðµ. ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¿Ð¾Ð»Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð°\n  // Ð±Ñ‹Ñ‚ÑŒ Ð¾Ð´Ð½Ð° Ð¸ Ñ‚Ð° Ð¶Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ RTK Query Ð·Ð½Ð°Ð», Ñ‡Ñ‚Ð¾ Â«ÐºÐ¾Ð³Ð´Ð° Ð¿Ñ€Ð¾Ð¸Ð·Ð¾Ð¹Ð´ÐµÑ‚ ÑÑ‚Ð° Ð¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ, ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ\n  // Ð½ÐµÐ´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð²ÑÐµ ÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ñ‚Ð¾Ñ‡ÐºÐ¸, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… ÑƒÐºÐ°Ð·Ð°Ð½Ð° Ð¾Ð´Ð½Ð° Ð¸ Ñ‚Ð° Ð¶Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ° Ñ‚ÐµÐ³Ð°Â».\n\n  // Â«ÐšÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ñ‚Ð¾Ñ‡ÐºÐ¸Â» Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÑÑŽÑ‚ ÑÐ¾Ð±Ð¾Ð¹ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°.\n  // ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ ÐºÐ¾Ð½ÐµÑ‡Ð½Ñ‹Ðµ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð±ÑƒÐ´ÑƒÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ GET HTTP-Ð·Ð°Ð¿Ñ€Ð¾Ñ\n  // Ð”Ð»Ñ Ð¿ÐµÑ€ÐµÐ¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ, Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Ð¾Ð±ÑŠÐµÐºÑ‚, Ñ‚Ð¸Ð¿Ð°: {url: '/posts', method: 'POST', body: newPost} Ð²Ð¼ÐµÑÑ‚Ð¾ ÑÐ°Ð¼Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ URL\n  endpoints: builder => ({\n    getPosts: builder.query({\n      query: () => '/posts',  // URL Ð´Ð»Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°: '/fakeApi/posts'\n      \n      // providesTags: ['Post'], // ÐºÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ° getPosts Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ñ‚ÐµÐ³ 'Post'\n      // Ð° addNewPost ÐºÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ° Ð¼ÑƒÑ‚Ð°Ñ†Ð¸Ð¸ Ð´ÐµÐ»Ð°ÐµÑ‚ ÑÑ‚Ð¾Ñ‚ Ñ‚ÐµÐ³ Ð½ÐµÐ´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼.\n      \n      providesTags: (result = [], error, arg) => [\n        'Post',\n        ...result.map(({id}) => ({ type: 'Post', id }))\n      ]\n      // ÐŸÐ¾Ð»Ðµ providesTags Ñ‚Ð°ÐºÐ¶Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ result,\n      // arg Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¼Ð°ÑÑÐ¸Ð².  Ð­Ñ‚Ð¾ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð½Ð°Ð¼ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ñ‚ÐµÐ³Ð¾Ð² Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ð¾Ð²\n      // Ð¸Ð·Ð²Ð»ÐµÐºÐ°ÐµÐ¼Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…. Ð¢Ð¾Ñ‡Ð½Ð¾ Ñ‚Ð°Ðº Ð¶Ðµ invalidatesTagsÐ¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¸ Ð¾Ð±Ñ€Ð°Ñ‚Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð².\n      // Ñ‚.Ðµ. Ð¼Ñ‹ ÑÐ¼Ð¾Ð¶ÐµÐ¼ Ð²Ñ‹Ð±Ð¾Ñ€Ð¾Ñ‡Ð½Ð¾ Ð°Ð½ÑƒÐ»Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² ÐºÑÑˆÐµ, Ñ‚.Ðµ. Ð² ÑÐ¿Ð¸ÑÐºÐµ posts Ð³Ð´Ðµ Ð»ÐµÐ¶Ð¸Ñ‚ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÑŒ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾\n      // Ð¿Ð¾ÑÑ‚Ð° Ð²Ð²Ð¸Ð´Ðµ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ ÐµÑÑ‚ÑŒ id, title, content Ð¸ Ñ‚Ð´.\n    }),\n    getPost: builder.query({\n      query: (postId) => `/posts/${postId}`,\n      providesTags: (result, error, arg) => [{ type: 'Post', id: arg }]\n    }),\n    addNewPost: builder.mutation({\n      query: (initialPost) => ({\n        url: '/posts',\n        method: 'POST',\n        body: initialPost // Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÐ¼ Ð¿Ð¾Ð»ÐµÐ·Ð½ÑƒÑŽ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ (Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð¾ÑÑ‚) Ð² Ñ‚ÐµÐ»Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°\n      }),\n      // Ð—Ð´ÐµÑÑŒ Ð½Ð°ÑˆÐ° query Ð¾Ð¿Ñ†Ð¸Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ Ð¾Ð±ÑŠÐµÐºÑ‚, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ð¹ {url, method, body}.\n      // ÐŸÐ¾ÑÐºÐ¾Ð»ÑŒÐºÑƒ Ð¼Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ fetchBaseQuery Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð², body Ð¿Ð¾Ð»Ðµ \n      // Ð±ÑƒÐ´ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐµÑ€Ð¸Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾ Ð´Ð»Ñ Ð½Ð°Ñ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ JSON.\n\n      invalidatesTags: ['Post'], // ÐœÐ°ÑÑÐ¸Ð² Ñ‚ÐµÐ³Ð¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ ÑÑ‚Ð°Ð½ÑƒÑ‚ Ð½ÐµÐ´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸, ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ€Ð°Ð· ÐºÐ¾Ð³Ð´Ð° Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑÑ Ð¼ÑƒÑ‚Ð°Ñ†Ð¸Ñ\n      // Ð­Ñ‚Ð¾ Ð¿Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ  getPosts ÐºÐ¾Ð½ÐµÑ‡Ð½ÑƒÑŽ Ñ‚Ð¾Ñ‡ÐºÑƒ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ñ€Ð°Ð·, ÐºÐ¾Ð³Ð´Ð° Ð¼Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð¾ÑÑ‚\n      // Ñ‚.Ðµ. Ð¼Ñ‹ Ð´ÐµÐ»Ð°ÐµÐ¼ Ð½ÐµÐ´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² ÐºÑÑˆÐµ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð½Ñ‹Ðµ Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° /fakeApi/posts\n    }),\n    editPost: builder.mutation({\n      query: (post) => ({\n        url: `/posts/${post.id}`,\n        method: 'PATCH',\n        body: post,\n      }),\n      invalidatesTags: (result, error, arg) => [{ type: 'Post', id: arg.id}]\n    }),\n  }),\n});\n\n// Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ Ñ…ÑƒÐº Ð´Ð»Ñ ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð¹ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° `getPosts`\n// Ð’ÐµÐ´ÑŒ RTKQ-react Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ñ…ÑƒÐºÐ¸ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð¹ ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ð¾Ð¹ Ð½Ð°Ð¼Ð¸ ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð¹ Ñ‚Ð¾Ñ‡ÐºÐ¸!\nexport const {\n  useGetPostsQuery,\n  useGetPostQuery,\n  useAddNewPostMutation, // endpoint addNewPost: builder. > mutation <\n  useEditPostMutation,\n} = apiSlice;\n\n\n// ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ð¸Ð¼ÐµÐ½Ð½Ð¾ useGetPostsQuery ?\n// Ð¥ÑƒÐºÐ¸ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¸Ð¼ÐµÐ½ÑƒÑŽÑ‚ÑÑ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ ÑÐ¾Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ñ:\n// use - Ð¿Ñ€ÐµÑ„Ð¸ÐºÑ, Ð³Ð¾Ð²Ð¾Ñ€ÑÑ‰Ð¸Ð¹ Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾ Ñ…ÑƒÐº React'Ð°\n// Ð˜Ð¼Ñ ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð¹ Ñ‚Ð¾Ñ‡ÐºÐ¸, Ñ Ð·Ð°Ð³Ð»Ð°Ð²Ð½Ð¾Ð¹ Ð±ÑƒÐºÐ²Ñ‹\n// Ð¢Ð¸Ð¿ ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð¹ Ñ‚Ð¾Ñ‡ÐºÐ¸ Query Ð¸Ð»Ð¸ Mutation","import { createSlice, createAsyncThunk, createEntityAdapter } from '@reduxjs/toolkit';\nimport { client } from '../../api/client';\n\nconst usersAdapter = createEntityAdapter(); // Ð¾Ð±ÑŠÐµÐºÑ‚ Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ð¼Ð¸ Ð½Ðµ Ð½ÑƒÐ¶ÐµÐ½, Ð¿Ð¾ ÑÑ‚Ð¾Ð¼Ñƒ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÐ¼.\n\n// const initialState = [\n//   { id: '0', name: 'Tianna Jenkins' },\n//   { id: '1', name: 'Kevin Grant' },\n//   { id: '2', name: 'Madison Price' }\n// ]\n// const initialState = [];\nconst initialState = usersAdapter.getInitialState(); // {entities: {}, ids:[]}\n\n\nexport const fetchUsers = createAsyncThunk(\n  'users/fetchUsers',\n  async () => {\n    const response = await client.get('/fakeApi/users');\n    return response.data\n  }\n)\n\nconst usersSlice = createSlice({\n  name: 'users',\n  initialState,\n  reducers: {},\n  extraReducers(builder) {\n    builder\n      // .addCase(fetchUsers.fulfilled, (state, action) => {\n        // state.push(...action.payload) Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ñ€Ð¸Ð²ÐµÑÑ‚Ð¸ Ðº Ð´ÑƒÐ±Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ ÑÐ¿Ð¸ÑÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹\n        // return action.payload; // Immer Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð·Ð°Ð¼ÐµÐ½ÑÐµÑ‚ initialState Ð½Ð¾Ð²Ñ‹Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð¼\n      // })\n      .addCase(fetchUsers.fulfilled, usersAdapter.setAll)\n  }\n});\n\nexport default usersSlice.reducer;\n\n// export const selectAllUsers = (state) => state.users;\n// export const selectUserById = (state, userId) => state.users.find((user) => user.id === userId);\nexport const {\n  selectAll: selectAllUsers,\n  selectById: selectUserById,\n} = usersAdapter.getSelectors((state) => state.users);","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { selectUserById } from '../users/usersSlice.js';\n\nexport const PostAuthor = ({ userId }) => {\n  const author = useSelector(state => selectUserById(state, userId));\n  return <span>by {author ? author.name : 'Unknown author'}</span>\n}","import React from 'react';\nimport { parseISO, formatDistanceToNow } from 'date-fns';\n\nexport const TimeAgo = ({ timestamp }) => {\n  let timeAgo = '';\n  if (timestamp) {\n    const date = parseISO(timestamp);\n    const timePeriod = formatDistanceToNow(date);\n    timeAgo = `${timePeriod} ago`\n  }\n\n  return (\n    <span title={timestamp} >\n      &nbsp; <i>{timeAgo}</i>\n    </span>\n  )\n}","import React from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { reactionAdded } from './postsSlice';\n\nconst reactionEmoji = {\n  thumbsUp: 'ðŸ‘',\n  hooray: 'ðŸŽ‰',\n  heart: 'â¤ï¸',\n  rocket: 'ðŸš€',\n  eyes: 'ðŸ‘€'\n}\n\nexport const ReactionButtons = ({ post }) => {\n  const dispatch = useDispatch();\n  \n  const reactionButtons = Object.entries(reactionEmoji).map(([name, emoji]) => {\n    return (\n      <button \n        key={name} \n        type=\"button\" \n        className=\"muted-button reaction-button\" \n        onClick={() => \n          dispatch(reactionAdded({ postId: post.id, reaction: name }))\n        }\n      >\n        {emoji} {post.reactions[name]}\n      </button>\n    )\n  });\n\n  return <div>{reactionButtons}</div>\n}","import React from 'react'\n\nexport const Spinner = ({ text = '', size = '5em' }) => {\n  const header = text ? <h4>{text}</h4> : null\n  return (\n    <div className=\"spinner\">\n      {header}\n      <div className=\"loader\" style={{ height: size, width: size }} />\n    </div>\n  )\n}\n","import React, { useEffect, useMemo } from 'react';\n\nimport cn from 'classnames';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { \n  selectAllPosts,\n  fetchPosts,\n  selectPostIds,\n  selectPostById,\n} from './postsSlice';\n\nimport { useGetPostsQuery } from '../api/apiSlice';\n\nimport { Link } from 'react-router-dom';\nimport { PostAuthor } from './PostAuthor.js';\nimport { TimeAgo } from './TimeAgo.js';\nimport { ReactionButtons } from './ReactionButtons.js';\nimport { Spinner } from '../../components/Spinner.js';\n\n// const PostExcerpt = ({ postId }) => { // Ð¿Ð¾ÑÐ»Ðµ RTK\n//   const post = useSelector((state) => selectPostById(state, postId)); \n  \n//   return (\n//     <article className=\"post-excerpt\" key={post.id}>\n//       <h3>{post.title}</h3>\n//       <div>\n//         <PostAuthor userId={post.user} />\n//         <TimeAgo timestamp={post.date} />\n//       </div>\n//       <p className=\"post-content\">{post.content.substring(0, 100)}</p>\n\n//       <ReactionButtons post={post} />\n//       <Link to={`/posts/${post.id}`} className=\"button muted-button\">\n//         View Post\n//       </Link>\n//     </article>\n//   )\n// }\n\n// RTK Query\nconst PostExcerpt = ({ post }) => { \n  return (\n    <article className=\"post-excerpt\" key={post.id}>\n      <h3>{post.title}</h3>\n      <div>\n        <PostAuthor userId={post.user} />\n        <TimeAgo timestamp={post.date} />\n      </div>\n      <p className=\"post-content\">{post.content.substring(0, 100)}</p>\n\n      <ReactionButtons post={post} />\n      <Link to={`/posts/${post.id}`} className=\"button muted-button\">\n        View Post\n      </Link>\n    </article>\n  )\n}\n\n\n\n// export const PostsList = () => {\n//   const dispatch = useDispatch();\n  \n//   // ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹ React Ñ‡Ð¸Ñ‚Ð°ÑŽÑ‚ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸Ð· Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð° Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ useSelector Ñ…ÑƒÐºÐ°\n//   // const posts = useSelector(state => state.posts); // state.posts Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ð¹ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÑÑ€ÐµÐ· Ð´Ð°Ð½Ð½Ñ‹Ñ…\n//   // const posts = useSelector(selectAllPosts); // useSelector -> store.getState() -> ÐºÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ state -> selectorAllPosts(state) -> profit\n//   const orderedPostIds = useSelector(selectPostIds)\n\n//   const postStatus = useSelector((state) => state.posts.status);\n//   const error = useSelector((state) => state.posts.error);\n\n//   useEffect(() => {\n//     if(postStatus === 'idle') {\n//       dispatch(fetchPosts())\n//     }\n//   }, [postStatus, dispatch]);\n\n//   let content;\n\n//   if (postStatus === 'loading') {\n//     content = <Spinner text=\"Loading...\" />\n//   } else if (postStatus === 'succeeded') {\n//     content = orderedPostIds.map((postId) => (<PostExcerpt key={postId} postId={postId} />))\n//   } else if (postStatus === 'failed') {\n//     content = <div>{error}</div>\n//   }\n\n//   return (\n//     <section className=\"post-list\">\n//       <h2>Posts</h2>\n//       {content}\n//     </section>\n//   )\n// }  \n\n// Ñ RTK Query\nexport const PostsList = () => {\n  // Ð¡Ð¸Ð³Ð½Ð°Ñ‚ÑƒÑ€Ð° Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð¾Ñ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð½Ð° Ñ„ÐµÐ¹ÐºÐ¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€\n  const {\n    // data: posts, // Ð­Ñ‚Ð¾ Ð¿Ð¾Ð»Ðµ Ð±ÑƒÐ´ÐµÑ‚ undefined Ð´Ð¾ Ñ‚ÐµÑ… Ð¿Ð¾Ñ€, Ð¿Ð¾ÐºÐ° Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½ Ð¾Ñ‚Ð²ÐµÑ‚ .\n    data: posts = [],\n    isLoading, // Ð•ÑÐ»Ð¸ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ Ð² Ð¿ÐµÑ€Ð²Ñ‹Ðµ true, Ð² Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐµÐ¼ Ð²ÑÐµÐ³Ð´Ð° Ð±ÑƒÐ´ÐµÑ‚ false\n    isFetching, // Ð•ÑÐ»Ð¸ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ÑÑ true, ÐµÑÐ»Ð¸ Ð½ÐµÑ‚, Ñ‚Ð¾ false\n    isSuccess,\n    isError,\n    error,\n    refetch // Ñ„ÑƒÐ½. Ð´Ð»Ñ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°\n  } = useGetPostsQuery(); // Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÐ¼ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° Ñ„ÐµÐºÐ¾Ð²Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€ .../fakeApi/posts\n\n  const sortedPosts = useMemo(() => {\n    const sortedPosts = posts.slice();\n    // ÐœÑ‹ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÐ¼ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ posts.sort()Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ, Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾ Array.sort() Ð¸Ð·Ð¼ÐµÐ½ÑÐµÑ‚ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ð¹ Ð¼Ð°ÑÑÐ¸Ð², \n    // Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð½Ð°Ð¼ Ð½ÑƒÐ¶Ð½Ð¾ ÑÐ½Ð°Ñ‡Ð°Ð»Ð° ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ ÐµÐ³Ð¾ ÐºÐ¾Ð¿Ð¸ÑŽ. Ð§Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð¹ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸ Ð¿Ñ€Ð¸ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð¼ Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ð½Ð³Ðµ\n    \n    sortedPosts.sort((a, b) => b.date.localeCompare(a.date));\n    return sortedPosts;\n  }, [posts]);\n\n  let content;\n\n  if (isLoading) {\n    content = <Spinner text=\"Loading...\" />\n  } else if (isSuccess) {\n    const renderPosts = sortedPosts.map((post) => (\n      <PostExcerpt key={post.id} post={post} />\n    ));\n    \n    const containerClassname = cn('posts-container', {\n      disabled: isFetching\n    });\n\n    content = <div className={containerClassname}>{renderPosts}</div>\n  } else if (isError) {\n    content = <div>{error.toString()}</div>\n  }\n\n  return (\n    <section className=\"posts-list\">\n      <h2>Posts</h2>\n      <button onClick={refetch}>Refetch Posts</button>\n      {content}\n    </section>\n  )\n}  \n\n// ÐšÐ¾Ð½Ñ†ÐµÐ¿Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾ <PostsList> Ð¾Ð½ Ð¿Ð¾-Ð¿Ñ€ÐµÐ¶Ð½ÐµÐ¼Ñƒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ñ‚Ñƒ Ð¶Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ, Ñ‡Ñ‚Ð¾ Ð¸ Ñ€Ð°Ð½ÑŒÑˆÐµ,\n// Ð½Ð¾ Ð¼Ñ‹ ÑÐ¼Ð¾Ð³Ð»Ð¸ Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð½Ð¾Ð¶ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ Ð²Ñ‹Ð·Ð¾Ð²Ñ‹ useSelector Ð¸ useEffect Ð´Ð¸ÑÐ¿ÐµÑ‚Ñ‡ÐµÑ€Ð¸Ð·Ð°Ñ†Ð¸ÑŽ \n// Ð¾Ð´Ð½Ð¸Ð¼ Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð¼ useGetPostsQuery().","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addNewPost } from './postsSlice.js';\nimport { selectAllUsers } from '../users/usersSlice.js';\n\n// export const AddPostForm = () => {\n//   const [title, setTitle] = useState('');\n//   const [content, setContent] = useState('');\n//   const [userId, setUserId] = useState('');\n//   const [requestStatus, setRequestStatus] = useState('idle'); // idle === Ð±ÐµÐ·Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÐµÑ‚\n\n//   const dispatch = useDispatch();\n\n//   // const users = useSelector(state => state.users);\n//   const users = useSelector(selectAllUsers);\n\n//   const onTitleChanged = e => setTitle(e.target.value);\n//   const onContentChanged = e => setContent(e.target.value);\n//   const onAuthorChanged = e => setUserId(e.target.value);\n\n//   const canSave = [title, content, userId].every(Boolean) && requestStatus === 'idle';\n//   const onSavePostClicked = async () => {\n//     if (canSave) {\n//       try {\n//         setRequestStatus('pending');\n\n\n//         // unwrap INFO: https://redux.js.org/tutorials/essentials/part-5-async-logic#checking-thunk-results-in-components\n//         await dispatch(addNewPost({ title, content, user:userId })).unwrap();\n//         // Redux-toolkit Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð¼ÐµÑ‚Ð¾Ð´ .unwrap() Ðº Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼Ð¾Ð¼Ñƒ Promise. Ð˜ÑÐ¿. ÑÑ‚Ð¾Ð³Ð¾ Ð¼ÐµÑ‚Ð¾Ð´Ð° Ð²Ð¾Ð·Ð²Ñ€. ÐµÑ‰Ðµ Ð¾Ð´Ð¸Ð½ Ð¿Ñ€Ð¾Ð¼Ð¸Ñ \n//         // ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ action.payload Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ fulfilled Ð¸Ð»Ð¸ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚ Ð²ÑÐ¿Ð»Ñ‹Ñ‚Ð¸ÑŽ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ rejected.\n//         // Ð­Ñ‚Ð¾ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð½Ð°Ð¼ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ ÑƒÑÐ¿ÐµÑ…Ð¸ Ð¸ Ð½ÐµÑƒÐ´Ð°Ñ‡Ð¸ Ð² ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ðµ, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ Ð¾Ð±Ñ‹Ñ‡Ð½ÑƒÑŽ try/catch Ð»Ð¾Ð³Ð¸ÐºÑƒ.\n//         // Ð“Ñ€ÑƒÐ±Ð¾ Ð³Ð¾Ð²Ð¾Ñ€Ñ .unwrap() Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ‡Ñ‚Ð¾ Ð²ÐµÑ€Ð½ÑƒÐ» Ð¿Ñ€Ð¾Ð¼Ð¸Ñ Ð² Ð¿Ð¾Ð»Ðµ action.type Ð´Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ .then Ñ Ð´Ð¾Ð¿ Ð»Ð¾Ð³Ð¸ÐºÐ¾Ð¹\n\n//         // ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð·Ð°Ð¼ÐµÐ½ÑÑ‚ÑŒ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ unwrap (Ð¿Ñ€Ð¸Ð¼ÐµÑ€ ÑƒÑÐ»Ð¾Ð²Ð½Ñ‹Ð¹):\n//         // Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð¼Ð¸Ñ Ð²ÐµÑ€Ð½ÑƒÐ» ÑÐºÑˆÐ½ Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ action.type === \"posts/addNewPost/fulfilled\", Ñ‚Ð¾Ð³Ð´Ð°\n//         // dispatch(...) + .then((action) => action.payload), ÐµÑÐ»Ð¸ Ð¸ÑÐ¿. Ñ await Ñ‚Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ ÑÑ€Ð°Ð·Ñƒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð½Ð°Ñ€ÑƒÐ¶Ñƒ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ\n\n//         // Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð¼Ð¸Ñ Ð²ÐµÑ€Ð½ÑƒÐ» ÑÐºÑˆÐ½ Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ action.type === \"posts/addNewPost/rejected\", Ñ‚Ð¾Ð³Ð´Ð°\n//         // dispatch(...) + .then(action => {throw action.error.message}) - Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð²ÑÐ¿Ð»Ñ‹Ð²Ð°ÐµÑ‚ Ð¸ ÑƒÐ¶Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ÑÑ try/catch (await Ð½Ð¸ÐºÐ°Ðº Ð½Ðµ Ð²Ð»Ð¸ÑÐµÑ‚ Ð½Ð° Ð²ÑÐ¿Ð»Ñ‹Ñ‚Ð¸Ðµ)\n//         // Ð² Ð¼Ð¾ÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ðµ await Ð½ÑƒÐ¶ÐµÐ½ Ð´Ð»Ñ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° Ð¿Ð¾Ð»ÐµÐ¹ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¿Ð¾ÑÐ»Ðµ Ñ‚Ð¾Ð³Ð¾, ÐºÐ°Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ð»ÑÑ thunk, Ð½Ðµ Ð²Ð°Ð¶Ð½Ð¾ Ñ ÐºÐ°ÐºÐ¸Ð¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð¼.\n\n//         setTitle('');\n//         setContent('');\n//         setUserId('');\n//       } catch (err) {\n\n//         // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ dispatch(addNewPost) - rejected, unwrap Ð¿Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚ Ð½Ðµ Ð¿Ñ€Ð¾Ð³Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÑƒ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¿Ñ€Ð¾Ð¼Ð¸ÑÐ°, \n//         // Ð° Ð¿Ð¾Ð´Ð½ÑÑ‚ÑŒ ÐµÑ‘ Ð½Ð°Ñ€ÑƒÐ¶Ñƒ Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ñ‚ÑƒÑ‚! Ð­Ñ‚Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ Ð²Ð°Ð¶Ð½Ð¾!\n//         console.error('Failed to save the post: ', err)\n//         // Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾Ð¹Ð´ÐµÑ‚, ÐµÑÐ»Ð¸ addNewPostÐ²Ñ‹Ð·Ð¾Ð² API Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑÑ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹, Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð¾ÑÑ‚, \n//         // Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð² Ð¿Ð¾Ð»Ðµ Â«Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸ÐµÂ» Ð±ÑƒÐ´ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ»Ð¾Ð²Ð¾ Â«errorÂ» (Ð±ÐµÐ· ÐºÐ°Ð²Ñ‹Ñ‡ÐµÐº). Ð¡ÐµÑ€Ð²ÐµÑ€ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚ ÑÑ‚Ð¾ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚ Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹, \n//         // Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð²Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ, Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð½Ð° ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸. \n//         // Ð­Ñ‚Ð¾ Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð½ÑÑ‚ÑŒ ÐºÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ .unwrap() Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸. \n//         // Ð¢.Ðµ. Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ await dispatch(addNewPost({ title, content, user:userId }))\".unwrap()\" Ð¸ Ð±ÐµÐ· Ð½ÐµÑ‘\n\n//       } finally {\n//         setRequestStatus('idle');\n//       }\n//     }\n//   }\n\n//   const usersOptions = users.map(user => (\n//     <option key={user.id} value={user.id}>\n//       {user.name}\n//     </option>\n//   ))\n\n//   return (\n//     <section>\n//       <h2>Add a New Post</h2>\n//       <form>\n//         <label htmlFor=\"postTitle\">Post Title:</label>\n//         <input\n//           type=\"text\"\n//           id=\"postTitle\"\n//           name=\"postTitle\"\n//           value={title}\n//           onChange={onTitleChanged}\n//         />\n//         <label htmlFor=\"postAuthor\">Author:</label>\n//         <select id=\"postAuthor\" value={userId} onChange={onAuthorChanged}>\n//           <option value=\"\"></option>\n//           {usersOptions}\n//         </select>\n//         <label htmlFor=\"postContent\">Content:</label>\n//         <textarea\n//           id=\"postContent\"\n//           name=\"postContent\"\n//           value={content}\n//           onChange={onContentChanged}\n//         />\n//         <button type=\"button\" onClick={onSavePostClicked} disabled={!canSave}>Save Post</button>\n//       </form>\n//     </section>\n//   )\n// }\n\n\n\n// C RTK Query\nimport { useAddNewPostMutation, } from '../api/apiSlice';\n\nexport const AddPostForm = () => {\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [userId, setUserId] = useState('');\n  const [requestStatus, setRequestStatus] = useState('idle'); // idle === Ð±ÐµÐ·Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÐµÑ‚\n\n  const [addNewPost, { isLoading }] = useAddNewPostMutation();\n\n  const users = useSelector(selectAllUsers);\n\n  // form handlers\n  const onTitleChanged = e => setTitle(e.target.value);\n  const onContentChanged = e => setContent(e.target.value);\n  const onAuthorChanged = e => setUserId(e.target.value);\n\n  const canSave = [title, content, userId].every(Boolean) && !isLoading;\n\n  const onSavePostClicked = async () => {\n    if (canSave) {\n      try {\n        await addNewPost({ title, content, user: userId }).unwrap();\n        setTitle('');\n        setContent('');\n        setUserId('');\n      } catch (err) {\n        // Ð•ÑÐ»Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ dispatch(addNewPost) - rejected, unwrap Ð¿Ð¾Ð·Ð²Ð¾Ð»Ð¸Ñ‚ Ð½Ðµ Ð¿Ñ€Ð¾Ð³Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÑƒ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¿Ñ€Ð¾Ð¼Ð¸ÑÐ°, \n        // Ð° Ð¿Ð¾Ð´Ð½ÑÑ‚ÑŒ ÐµÑ‘ Ð½Ð°Ñ€ÑƒÐ¶Ñƒ Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ñ‚ÑƒÑ‚! Ð­Ñ‚Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ Ð²Ð°Ð¶Ð½Ð¾!\n        console.error('Failed to save the post: ', err)\n        // Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾Ð¹Ð´ÐµÑ‚, ÐµÑÐ»Ð¸ addNewPostÐ²Ñ‹Ð·Ð¾Ð² API Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑÑ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹, Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð¾ÑÑ‚, \n        // Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð² Ð¿Ð¾Ð»Ðµ Â«Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸ÐµÂ» Ð±ÑƒÐ´ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ»Ð¾Ð²Ð¾ Â«errorÂ» (Ð±ÐµÐ· ÐºÐ°Ð²Ñ‹Ñ‡ÐµÐº). Ð¡ÐµÑ€Ð²ÐµÑ€ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚ ÑÑ‚Ð¾ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚ Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ¾Ð¹, \n        // Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð²Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ, Ð·Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ðµ Ð½Ð° ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸. \n        // Ð­Ñ‚Ð¾ Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð½ÑÑ‚ÑŒ ÐºÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ .unwrap() Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸. \n        // Ð¢.Ðµ. Ð¿Ð¾Ð¿Ñ€Ð¾Ð±Ð¾Ð²Ð°Ñ‚ÑŒ await dispatch(addNewPost({ title, content, user:userId }))\".unwrap()\" Ð¸ Ð±ÐµÐ· Ð½ÐµÑ‘\n\n      } finally {\n        setRequestStatus('idle');\n      }\n    }\n  }\n\n  const usersOptions = users.map(user => (\n    <option key={user.id} value={user.id}>\n      {user.name}\n    </option>\n  ))\n\n  return (\n    <section>\n      <h2>Add a New Post</h2>\n      <form>\n        <label htmlFor=\"postTitle\">Post Title:</label>\n        <input\n          type=\"text\"\n          id=\"postTitle\"\n          name=\"postTitle\"\n          value={title}\n          onChange={onTitleChanged}\n        />\n        <label htmlFor=\"postAuthor\">Author:</label>\n        <select id=\"postAuthor\" value={userId} onChange={onAuthorChanged}>\n          <option value=\"\"></option>\n          {usersOptions}\n        </select>\n        <label htmlFor=\"postContent\">Content:</label>\n        <textarea\n          id=\"postContent\"\n          name=\"postContent\"\n          value={content}\n          onChange={onContentChanged}\n        />\n        <button type=\"button\" onClick={onSavePostClicked} disabled={!canSave}>Save Post</button>\n      </form>\n    </section>\n  )\n}\n","import React from 'react';\n// import { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { PostAuthor } from './PostAuthor';\nimport { TimeAgo } from './TimeAgo';\nimport { ReactionButtons } from './ReactionButtons';\n// import { selectPostById } from './postsSlice';\n\nimport { Spinner } from '../../components/Spinner'\nimport { useGetPostQuery } from '../api/apiSlice';\n\n// export const SinglePostPage = ({ match }) => {\n//   const { postId } = match.params;\n\n//   // const post = useSelector(state => state.posts.find(post => post.id === postId));\n//   const post = useSelector((state) => selectPostById(state, postId));\n\n//   if (!post) {\n//     return (\n//       <section>\n//         <h2>Post not found!</h2>\n//       </section>\n//     )\n//   }\n\n//   return (\n//     <section>\n//       <article className=\"post\">\n//         <h2>{post.title}</h2>\n//         <div>\n//           <PostAuthor userId={post.user} />\n//           <TimeAgo timestamp={post.date} />\n//         </div>\n//         <p className=\"post-content\">{post.content}</p>\n//         <ReactionButtons post={post} />\n//         <Link to={`/editPost/${post.id}`} className=\"button\" style={{marginTop: '15px'}}>\n//           Edit Post\n//         </Link>\n//       </article>\n//     </section>\n//   )\n// }\n\n// Ð¡ RTK Query\nexport const SinglePostPage = ({ match }) => {\n  const { postId } = match.params;\n\n  const { data: post = [], isFetching, isSuccess } = useGetPostQuery(postId);\n\n  let content;\n\n  if (isFetching) {\n    content = <Spinner text='loading' />;\n  } else if (isSuccess) {\n    content = (\n      <article className=\"post\">\n        <h2>{post.title}</h2>\n        <div>\n          <PostAuthor userId={post.user} />\n          <TimeAgo timestamp={post.date} />\n        </div>\n        <p className=\"post-content\">{post.content}</p>\n        <ReactionButtons post={post} />\n        <Link to={`/editPost/${post.id}`} className=\"button\" style={{ marginTop: '15px' }}>\n          Edit Post\n        </Link>\n      </article>\n    )\n  }\n\n  return <section>{content}</section>;\n}","import { useDispatch, useSelector } from 'react-redux';\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { postUpdated, selectPostById } from './postsSlice.js';\n\n// export const EditPostForm = ({ match }) => {\n//   const { postId } = match.params;\n\n//   // const post = useSelector((state) => \n//     // state.posts.find(post => post.id === postId));\n//   const post = useSelector((state) => selectPostById(state, postId));\n\n//   const [title, setTitle] = useState(post.title);\n//   const [content, setContent] = useState(post.content);\n\n//   const dispatch = useDispatch();\n//   const history = useHistory();\n\n//   const onTitleChanged = (e) => setTitle(e.target.value);\n//   const onContentChanged = (e) => setContent(e.target.value);\n//   const onSavePostClicked = () => {\n//     if (title && content) {\n//       dispatch(postUpdated({ id: postId, title, content }));\n//       history.push(`/posts/${postId}`)\n//     }\n//   }\n\n//   return (\n//     <section>\n//       <h2>Edit Post</h2>\n//       <form>\n//         <label htmlFor=\"postTitle\">Post Title:</label>\n//         <input\n//           type=\"text\"\n//           id=\"postTitle\"\n//           name=\"postTitle\"\n//           placeholder=\"What's on your mind?\"\n//           value={title}\n//           onChange={onTitleChanged}\n//         />\n//         <label htmlFor=\"postContent\">Content:</label>\n//         <textarea\n//           id=\"postContent\"\n//           name=\"postContent\"\n//           value={content}\n//           onChange={onContentChanged}\n//         />\n//       </form>\n//       <button type=\"button\" onClick={onSavePostClicked}>\n//         Save Post\n//       </button>\n//     </section>\n//   )\n// }\n\n\n// Ð¡ RTK Query\nimport { useGetPostQuery, useEditPostMutation } from '../api/apiSlice';\n\nexport const EditPostForm = ({ match }) => {\n  const { postId } = match.params;\n\n  const { data: post } = useGetPostQuery(postId);\n  const [updatePost, { isLoading }] = useEditPostMutation();\n\n  const [title, setTitle] = useState(post.title);\n  const [content, setContent] = useState(post.content);\n\n  const history = useHistory();\n\n  const onTitleChanged = (e) => setTitle(e.target.value);\n  const onContentChanged = (e) => setContent(e.target.value);\n\n  const onSavePostClicked = async () => {\n    if (title && content) {\n      await updatePost({ id: postId, title, content });\n      history.push(`/posts/${postId}`);\n    }\n  }\n\n  return (\n    <section>\n      <h2>Edit Post</h2>\n      <form>\n        <label htmlFor=\"postTitle\">Post Title:</label>\n        <input\n          type=\"text\"\n          id=\"postTitle\"\n          name=\"postTitle\"\n          placeholder=\"What's on your mind?\"\n          value={title}\n          onChange={onTitleChanged}\n        />\n        <label htmlFor=\"postContent\">Content:</label>\n        <textarea\n          id=\"postContent\"\n          name=\"postContent\"\n          value={content}\n          onChange={onContentChanged}\n        />\n      </form>\n      <button type=\"button\" onClick={onSavePostClicked}>\n        Save Post\n      </button>\n    </section>\n  )\n}","import { useSelector } from \"react-redux\";\nimport { selectUserById } from \"./usersSlice\";\nimport { selectPostByUser  } from '../posts/postsSlice.js';\nimport { Link } from 'react-router-dom';\n\nexport const UserPage = ({ match }) => {\n  const { userId } = match.params;\n  \n  const user = useSelector((state) => selectUserById(state, userId));\n \n\n  // ÐšÐ¾Ð³Ð´Ð° Ð¼Ñ‹ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ useSelector() Ð¾Ð½ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ÑÑ Ð½Ð° Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Redux.\n  // Ð­Ñ‚Ð¾ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚, Ñ‡Ñ‚Ð¾ useSelector Ð±ÑƒÐ´ÐµÑ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒÑÑ Ð²ÑÑÐºÐ¸Ð¹ Ñ€Ð°Ð·, ÐºÐ¾Ð³Ð´Ð° Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð±Ñ‹Ð»Ð¾ Ð¾Ñ‚Ð¿Ñ€Ð²Ð»ÐµÐ½Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ,\n  // Ð´Ð°Ð¶Ðµ Ð½Ðµ Ð²Ð°Ð¶Ð½Ð¾ Ð¸Ð· ÐºÐ°ÐºÐ¾Ð³Ð¾ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°.\n\n  // const postsForUser = useSelector(state => {\n  //   const allPosts = selectAllPosts(state)\n  //   return allPosts.filter(post => post.user === userId) <=== https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization\n  //   Ð¢Ð°Ðº Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð½ÐµÐ»ÑŒÐ·Ñ, ÑÑ‚Ð¾ Ð»Ð¾Ð¼Ð°ÐµÑ‚ Ð¿Ñ€Ð¸Ñ†Ð¸Ð¿ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ useSelector.\n  //   ÐœÐµÑ‚Ð¾Ð´ filter Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð¸Ñ‚ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° Ð½Ð¾Ð²Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð². ÐŸÐ¾ÑÐ»Ðµ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð° (ÐºÑ€Ð¾Ð¼Ðµ ÑÐ°Ð¼Ð¾Ð³Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾), useSelector\n  //   Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð¿Ð¾Ð²ÐµÑ€Ñ…Ð½Ð¾ÑÑ‚Ð½Ð¾Ðµ ÑÑ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ (===) Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð³Ð¾ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¸ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾, Ð½Ð¾ Ñ‚.Ðº. Ð¼Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼\n  //   Ð½Ð¾Ð²ÑƒÑŽ ÑÑÑ‹Ð»ÐºÑƒ, Ñ‚.Ðµ. Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ !== Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¼Ñƒ, ÑÑ‚Ð¾ Ð¿Ñ€Ð¸Ð²ÐµÐ´ÐµÑ‚ Ðº Ð»Ð¸ÑˆÐ½ÐµÐ¼Ñƒ Ñ€ÐµÐ½Ð´ÐµÑ€Ñƒ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°, Ð´Ð°Ð¶Ðµ Ð½Ðµ ÑÐ¼Ð¾Ñ‚Ñ€Ñ Ð½Ð° Ñ‚Ð¾,\n  //   Ñ‡Ñ‚Ð¾ Ñƒ Ð¾Ð±Ð¾Ð¸Ñ… ÑÑ€Ð°Ð²Ð½Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ñ… Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ð¹ Ð¾Ð´Ð¸Ð½Ð°ÐºÐ¾Ð²Ð¾Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ,Ð½Ð¾ Ñ€Ð°Ð·Ð½Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸.\n  // })\n\n  // 1 - useSelector Ð·Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð¿Ñ€Ð¾ÑˆÐ»Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð°, ÑÑ‚Ð¾ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚, Ñ‡Ñ‚Ð¾ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒ \n  // Ð¾Ð´Ð½Ñƒ Ð¸ Ñ‚Ñƒ Ð¶Ðµ ÑÑÑ‹Ð»ÐºÑƒ ÐµÑÐ»Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð¿Ð¾Ð¼ÐµÐ½ÑÐ»Ð¾ÑÑŒ.\n  \n  // 2 - Ð’ÑÐµÐ³Ð´Ð° Ð¿ÐµÑ€ÐµÐ´Ð°Ð²Ð°Ñ‚ÑŒ Ð² ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ Ð¾Ð´Ð½Ñƒ Ð¸ Ñ‚ÑƒÐ¶Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, Ñ‚.Ðµ. Ñ‚Ð°Ðº, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÐµÑ‘ ÑÑÑ‹Ð»ÐºÐ° Ð½Ðµ Ð¼ÐµÐ½ÑÐ»Ð°ÑÑŒ Ð¿Ð¾ÑÐ»Ðµ Ñ€ÐµÐ½Ð´ÐµÑ€Ð° ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°.\n  // Ð’ Ð¼Ð¾ÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° (selectAllPosts) Ð²Ñ‹Ð²ÐµÐ´ÐµÐ½Ð° Ð² Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» (Ð¸Ð»Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ Ð·Ð° Ñ€Ð°Ð¼ÐºÐ¸ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°),\n  // Ð³Ð´Ðµ ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¼ÐµÐ½ÑÑ‚ÑÑ Ð¿Ñ€Ð¸ Ñ€ÐµÐ½Ð´ÐµÑ€Ðµ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð°.\n  \n  const postsForUser = useSelector((state) => selectPostByUser(state, userId));\n  // selectPostByUser - ÐœÐµÐ¼Ð¾Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ createSelector, Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð½Ðµ ÑÑ‚Ð¾Ð¸Ñ‚ Ð±ÐµÑÐ¿Ð¾ÐºÐ¾Ð¸Ñ‚ÑÑ Ð¾ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ñ… Ð²Ñ‹ÑˆÐµ\n  // Ð•ÑÐ»Ð¸ Ð¼Ñ‹ Ð¿Ð¾Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ selectPostsByUserÐ½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€Ð°Ð·, Ð¾Ð½ Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ñ‚Ð¾Ð¼ ÑÐ»ÑƒÑ‡Ð°Ðµ, ÐµÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ð»Ð¸Ð±Ð¾ postsÐ¸Ð»Ð¸ userId Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»Ð¾ÑÑŒ\n  \n  const postTitles = postsForUser.map((post) => (\n    <li key={post.id}>\n      <Link to={`/posts/${post.id}`}>{post.title}</Link>\n    </li>\n  ));\n\n  return (\n    <section>\n      <h2>{user.name}</h2>\n\n      <ul>{postTitles}</ul>\n    </section>\n  )\n}","import { useSelector } from \"react-redux\";\nimport { Link } from 'react-router-dom';\n\nimport { selectAllUsers } from './usersSlice.js';\n\nexport const UsersList = () => {\n  const users = useSelector(selectAllUsers);\n\n  const renderUsers = users.map((user) => (\n    <li key={user.id}>\n      <Link to={`/users/${user.id}`}>{user.name}</Link>\n    </li>\n  ));\n\n  return (\n    <section>\n      <h2>Users</h2>\n\n      <ul>{renderUsers}</ul>\n    </section>\n  )\n}","import { useLayoutEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { parseISO, formatDistanceToNow } from 'date-fns';\nimport classnames from 'classnames';\nimport { selectAllNotifications, allNotificationsRead  } from './notificationsSlice.js';\nimport { selectAllUsers } from '../users/usersSlice.js';\n\nexport const NotificationsList = () => {\n  const dispatch = useDispatch();\n  const notifications = useSelector(selectAllNotifications);\n  const users = useSelector(selectAllUsers);\n\n  useLayoutEffect(() => {\n    dispatch(allNotificationsRead());    \n  })\n\n  const renderNotifications = notifications.map((notification) => {\n    const date = parseISO(notification.date);\n    const timeAgo = formatDistanceToNow(date);\n    const user = users.find((user) => user.id === notifications.user) || { name: 'Unknown User' };\n    const notificationClassname = classnames('notification', {\n      new: notification.isNew,\n    })\n    return (\n      <div key={notification.id} className={notificationClassname}>\n        <div>\n          <b>{user.name}</b> {notification.message}\n        </div>\n        <div title={notification.date}>\n          <i>{timeAgo} ago</i>\n        </div>\n      </div>\n    )\n  })\n\n  return (\n    <section className=\"notificationList\">\n      <h2>Notification</h2>\n      {renderNotifications}\n    </section>\n  )\n}","import React from 'react'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  // Redirect,\n} from 'react-router-dom'\n\nimport { Navbar } from './app/Navbar'\nimport { PostsList } from './features/posts/PostsList.js';\nimport { AddPostForm } from './features/posts/AddPostForm.js';\nimport { SinglePostPage } from './features/posts/SinglePostPage.js';\nimport { EditPostForm } from './features/posts/EditPostForm.js';\nimport { UserPage } from './features/users/UserPage.js';\nimport { UsersList } from './features/users/UsersList.js';\nimport { NotificationsList } from './features/notifications/NotificationsList';\n\nfunction App() {\n  return (\n    <Router>\n      <Navbar />\n      <div className=\"App\">\n        <Switch>\n          <Route exact path=\"/\" render={() =>\n            <>\n              <AddPostForm />\n              <PostsList />\n            </>\n          }\n          />\n          <Route exact path='/posts/:postId' component={SinglePostPage} />\n          <Route exact path=\"/editPost/:postId\" component={EditPostForm} />\n          <Route exact path='/users' component={UsersList} />\n          <Route exact path='/users/:userId' component={UserPage} />\n          <Route exact path='/notifications' component={NotificationsList} />\n          {/* <Redirect to=\"/\" /> */}\n        </Switch>\n      </div>\n    </Router>\n  )\n}\n\nexport default App\n","import { rest, setupWorker } from 'msw'\nimport { factory, oneOf, manyOf, primaryKey } from '@mswjs/data'\nimport { nanoid } from '@reduxjs/toolkit'\nimport faker from 'faker'\nimport seedrandom from 'seedrandom'\nimport { Server as MockSocketServer } from 'mock-socket'\nimport { setRandom } from 'txtgen'\n\nimport { parseISO } from 'date-fns'\n\nconst NUM_USERS = 3\nconst POSTS_PER_USER = 3\nconst RECENT_NOTIFICATIONS_DAYS = 7\n\n// Add an extra delay to all endpoints, so loading spinners show up.\nconst ARTIFICIAL_DELAY_MS = 2000\n\n/* RNG setup */\n\n// Set up a seeded random number generator, so that we get\n// a consistent set of users / entries each time the page loads.\n// This can be reset by deleting this localStorage value,\n// or turned off by setting `useSeededRNG` to false.\nlet useSeededRNG = true\n\nlet rng = seedrandom()\n\nif (useSeededRNG) {\n  let randomSeedString = localStorage.getItem('randomTimestampSeed')\n  let seedDate\n\n  if (randomSeedString) {\n    seedDate = new Date(randomSeedString)\n  } else {\n    seedDate = new Date()\n    randomSeedString = seedDate.toISOString()\n    localStorage.setItem('randomTimestampSeed', randomSeedString)\n  }\n\n  rng = seedrandom(randomSeedString)\n  setRandom(rng)\n  faker.seed(seedDate.getTime())\n}\n\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min)\n  max = Math.floor(max)\n  return Math.floor(rng() * (max - min + 1)) + min\n}\n\nconst randomFromArray = (array) => {\n  const index = getRandomInt(0, array.length - 1)\n  return array[index]\n}\n\n/* MSW Data Model Setup */\n\nexport const db = factory({\n  user: {\n    id: primaryKey(nanoid),\n    firstName: String,\n    lastName: String,\n    name: String,\n    username: String,\n    posts: manyOf('post'),\n  },\n  post: {\n    id: primaryKey(nanoid),\n    title: String,\n    date: String,\n    content: String,\n    reactions: oneOf('reaction'),\n    comments: manyOf('comment'),\n    user: oneOf('user'),\n  },\n  comment: {\n    id: primaryKey(String),\n    date: String,\n    text: String,\n    post: oneOf('post'),\n  },\n  reaction: {\n    id: primaryKey(nanoid),\n    thumbsUp: Number,\n    hooray: Number,\n    heart: Number,\n    rocket: Number,\n    eyes: Number,\n    post: oneOf('post'),\n  },\n})\n\nconst createUserData = () => {\n  const firstName = faker.name.firstName()\n  const lastName = faker.name.lastName()\n\n  return {\n    firstName,\n    lastName,\n    name: `${firstName} ${lastName}`,\n    username: faker.internet.userName(),\n  }\n}\n\nconst createPostData = (user) => {\n  return {\n    title: faker.lorem.words(),\n    date: faker.date.recent(RECENT_NOTIFICATIONS_DAYS).toISOString(),\n    user,\n    content: faker.lorem.paragraphs(),\n    reactions: db.reaction.create(),\n  }\n}\n\n// Create an initial set of users and posts\nfor (let i = 0; i < NUM_USERS; i++) {\n  const author = db.user.create(createUserData())\n\n  for (let j = 0; j < POSTS_PER_USER; j++) {\n    const newPost = createPostData(author)\n    db.post.create(newPost)\n  }\n}\n\nconst serializePost = (post) => ({\n  ...post,\n  user: post.user.id,\n})\n\n/* MSW REST API Handlers */\n\nexport const handlers = [\n  rest.get('/fakeApi/posts', function (req, res, ctx) {\n    const posts = db.post.getAll().map(serializePost)\n    return res(ctx.delay(ARTIFICIAL_DELAY_MS), ctx.json(posts))\n  }),\n  rest.post('/fakeApi/posts', function (req, res, ctx) {\n    const data = req.body\n\n    if (data.content === 'error') {\n      return res(\n        ctx.delay(ARTIFICIAL_DELAY_MS),\n        ctx.status(500),\n        ctx.json('Server error saving this post!')\n      )\n    }\n\n    data.date = new Date().toISOString()\n\n    const user = db.user.findFirst({ where: { id: { equals: data.user } } })\n    data.user = user\n    data.reactions = db.reaction.create()\n\n    const post = db.post.create(data)\n    return res(ctx.delay(ARTIFICIAL_DELAY_MS), ctx.json(serializePost(post)))\n  }),\n  rest.get('/fakeApi/posts/:postId', function (req, res, ctx) {\n    const post = db.post.findFirst({\n      where: { id: { equals: req.params.postId } },\n    })\n    return res(ctx.delay(ARTIFICIAL_DELAY_MS), ctx.json(serializePost(post)))\n  }),\n  rest.patch('/fakeApi/posts/:postId', (req, res, ctx) => {\n    const { id, ...data } = req.body\n    const updatedPost = db.post.update({\n      where: { id: { equals: req.params.postId } },\n      data,\n    })\n    return res(\n      ctx.delay(ARTIFICIAL_DELAY_MS),\n      ctx.json(serializePost(updatedPost))\n    )\n  }),\n\n  rest.get('/fakeApi/posts/:postId/comments', (req, res, ctx) => {\n    const post = db.post.findFirst({\n      where: { id: { equals: req.params.postId } },\n    })\n    return res(\n      ctx.delay(ARTIFICIAL_DELAY_MS),\n      ctx.json({ comments: post.comments })\n    )\n  }),\n\n  rest.post('/fakeApi/posts/:postId/reactions', (req, res, ctx) => {\n    const postId = req.params.postId\n    const reaction = req.body.reaction\n    const post = db.post.findFirst({\n      where: { id: { equals: postId } },\n    })\n\n    const updatedPost = db.post.update({\n      where: { id: { equals: postId } },\n      data: {\n        reactions: {\n          ...post.reactions,\n          [reaction]: (post.reactions[reaction] += 1),\n        },\n      },\n    })\n\n    return res(\n      ctx.delay(ARTIFICIAL_DELAY_MS),\n      ctx.json(serializePost(updatedPost))\n    )\n  }),\n  rest.get('/fakeApi/notifications', (req, res, ctx) => {\n    const numNotifications = getRandomInt(1, 5)\n\n    let notifications = generateRandomNotifications(\n      undefined,\n      numNotifications,\n      db\n    )\n\n    return res(ctx.delay(ARTIFICIAL_DELAY_MS), ctx.json(notifications))\n  }),\n  rest.get('/fakeApi/users', (req, res, ctx) => {\n    return res(ctx.delay(ARTIFICIAL_DELAY_MS), ctx.json(db.user.getAll()))\n  }),\n]\n\nexport const worker = setupWorker(...handlers)\n// worker.printHandlers() // Optional: nice for debugging to see all available route handlers that will be intercepted\n\n/* Mock Websocket Setup */\n\nconst socketServer = new MockSocketServer('ws://localhost')\n\nlet currentSocket\n\nconst sendMessage = (socket, obj) => {\n  socket.send(JSON.stringify(obj))\n}\n\n// Allow our UI to fake the server pushing out some notifications over the websocket,\n// as if other users were interacting with the system.\nconst sendRandomNotifications = (socket, since) => {\n  const numNotifications = getRandomInt(1, 5)\n\n  const notifications = generateRandomNotifications(since, numNotifications, db)\n\n  sendMessage(socket, { type: 'notifications', payload: notifications })\n}\n\nexport const forceGenerateNotifications = (since) => {\n  sendRandomNotifications(currentSocket, since)\n}\n\nsocketServer.on('connection', (socket) => {\n  currentSocket = socket\n\n  socket.on('message', (data) => {\n    const message = JSON.parse(data)\n\n    switch (message.type) {\n      case 'notifications': {\n        const since = message.payload\n        sendRandomNotifications(socket, since)\n        break\n      }\n      default:\n        break\n    }\n  })\n})\n\n/* Random Notifications Generation */\n\nconst notificationTemplates = [\n  'poked you',\n  'says hi!',\n  `is glad we're friends`,\n  'sent you a gift',\n]\n\nfunction generateRandomNotifications(since, numNotifications, db) {\n  const now = new Date()\n  let pastDate\n\n  if (since) {\n    pastDate = parseISO(since)\n  } else {\n    pastDate = new Date(now.valueOf())\n    pastDate.setMinutes(pastDate.getMinutes() - 15)\n  }\n\n  // Create N random notifications. We won't bother saving these\n  // in the DB - just generate a new batch and return them.\n  const notifications = [...Array(numNotifications)].map(() => {\n    const user = randomFromArray(db.user.getAll())\n    const template = randomFromArray(notificationTemplates)\n    return {\n      id: nanoid(),\n      date: faker.date.between(pastDate, now).toISOString(),\n      message: template,\n      user: user.id,\n    }\n  })\n\n  return notifications\n}\n","import { configureStore } from '@reduxjs/toolkit';\nimport postsReducer from '../features/posts/postsSlice.js';\nimport usersReducer from '../features/users/usersSlice.js';\nimport notificationsSlice from '../features/notifications/notificationsSlice.js';\nimport { apiSlice } from '../features/api/apiSlice';\n\nexport default configureStore({\n  reducer: {\n    posts: postsReducer,\n    users: usersReducer,\n    notifications: notificationsSlice,\n    [apiSlice.reducerPath]: apiSlice.reducer\n  },\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware().concat(apiSlice.middleware)\n    // - ÑÑ‚Ð¾ ÑÐ´ÐµÐ»Ð°Ð½Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ðµ redux-thunk (fetchPost fetchUsers fetchNotif...)\n    // Ð¸Ð· ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÑ€ÐµÐ·Ð° (ÑÐ»Ð°Ð¹ÑÐ°) Ð¸ Ð² Ñ‚Ð¾Ð¶Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð²Ð½Ð¾Ð²ÑŒ ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð¼Ð¸Ð´Ð»Ð²Ð°Ñ€ Ð¸Ð· apiSlice\n})\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport store from './app/store'\nimport { Provider } from 'react-redux'\n\nimport { fetchUsers } from './features/users/usersSlice.js';\n\nimport { worker } from './api/server'\n\n// Wrap app rendering so we can wait for the mock API to initialize\nasync function start() {\n  // Start our mock API server\n  await worker.start({ onUnhandledRequest: 'bypass' })\n\n  store.dispatch(fetchUsers());\n  \n  ReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  )\n}\n\nstart()\n"],"sourceRoot":""}